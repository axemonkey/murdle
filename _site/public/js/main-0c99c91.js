(()=>{var f={categories:4,size:5,labels:["Students","Subjects","Teachers","Grades"],items:[["Adrian","Bruce","Dave","Nicko","Steve"],["Chemistry","French","History","Maths","Music"],["Mr Bettencourt","Mrs Hammett","Dr Malmsteen","Mr Mustaine","Miss Petrucci"],["A","B","C","D","E"]]};var g=e=>{let t=document.location.search;if(t){let s=new URLSearchParams(t);if(s){let a=s.get(e);if(a){let o=JSON.parse(a);return console.log("woop"),console.log(o),o}}}return!1},p=()=>{let e=g("data"),t;return!e.categories||!e.size?t=structuredClone(f):t=e,t};var n,w=e=>{for(let t=0;t<5;t++)e.classList.remove("state".concat(t))},h=e=>{let t=e.querySelectorAll('[data-state="4"]');for(let s of t)d(s,0,!0);x(e)},x=e=>{let t=e.querySelectorAll('[data-state="2"]');for(let s of t){let a=s.dataset.row,o=e.querySelectorAll('[data-row="'.concat(a,'"]'));for(let l of o)l.dataset.state==="0"&&d(l,4,!0);let r=s.dataset.col,u=e.querySelectorAll('[data-col="'.concat(r,'"]'));for(let l of u)l.dataset.state==="0"&&d(l,4,!0)}},L=e=>{let t=e.closest(".box");h(t)},k=(e,t)=>{let s;switch(t){case 1:s="\u274C";break;case 2:s="\u2705";break;case 3:s="\u2753";break;case 4:s="\u2716\uFE0F";break;default:s=" ";break}e.textContent=s},d=(e,t,s)=>{e.dataset.state=t,w(e),e.classList.add("state".concat(t)),k(e,t),s||L(e)},v=e=>{let t=e.closest(".box"),s=t.querySelectorAll('[data-row="'.concat(e.dataset.row,'"][data-state="2"]')),a=t.querySelectorAll('[data-col="'.concat(e.dataset.col,'"][data-state="2"]'));return s.length>0||a.length>0},y=e=>{let t=Number.parseInt(e.dataset.state,10);if(t===1&&v(e))return!1;if(t<4){let s=t+1;s===4&&(s=0),d(e,s)}},z=e=>{let t=document.createElement("div");t.classList.add("labels","labels-size".concat(e.size)),t.id="labels".concat(e.labelsDiv),["0","2a","3"].includes(e.labelsDiv.toString())&&t.classList.add("labels-side"),console.log("labels: ".concat(e.group));let s=document.createElement("div");s.classList.add("group"),s.textContent=e.group,t.append(s);for(let a=0;a<e.size;a++){let o=document.createElement("div");o.classList.add("item","item".concat(a)),o.textContent=e.items[a],t.append(o)}return t},$=e=>{let t=document.createElement("div");t.classList.add("box","box-size".concat(e.size)),t.id="box".concat(e.boxNumber);for(let s=1;s<=e.size;s++)for(let a=1;a<=e.size;a++){let o=document.createElement("div");o.classList.add("cell","state0"),o.dataset.state="0",o.dataset.row=s,o.dataset.col=a,o.dataset.rc="".concat(s,"-").concat(a),o.style.gridRow=s,o.style.gridColumn=a,o.textContent=" ",t.append(o),o.addEventListener("click",r=>{y(r.target)})}return t},C=(e,t)=>{let{labels:s,items:a}=n,o=t||n.size,r=e||n.categories,u=(r-2)*3,l=document.querySelector("#puzzle");l.dataset.cats=r,l.dataset.size=o;for(let c=1;c<=u;c++){let m=$({boxNumber:c,size:o});l.append(m)}for(let c=0;c<r;c++){let i={labelsDiv:c,size:o,group:s[c],items:a[c]},m=z(i);if(l.append(m),["2","3"].includes(c.toString())){let b=i;b.labelsDiv="".concat(i.labelsDiv,"a");let S=z(b);l.append(S)}}},A=()=>{document.querySelector("#puzzle").replaceChildren()},q=()=>{let e=document.querySelector("#settingsLink"),t=encodeURIComponent(JSON.stringify(n)),s=e.getAttribute("href");e.setAttribute("href","".concat(s,"/?data=").concat(t))},E=()=>{confirm("Are you sure you want to clear the puzzle?")&&(A(),C(n.categories,n.size))},D=()=>{console.log("JS loaded"),n=p(),console.log(n),document.querySelector("#menu-trigger").addEventListener("click",e=>{e.target.closest("nav").classList.toggle("open")}),document.querySelector("#clearButton").addEventListener("click",E),C(),q()};window.addEventListener("load",D);})();
//# sourceMappingURL=main-0c99c91.js.map */

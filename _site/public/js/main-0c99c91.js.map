{
  "version": 3,
  "sources": ["../../assets/js/modules/settings.js", "../../assets/js/modules/tools.js", "../../assets/js/main.js"],
  "sourcesContent": ["const defaults = {\n\tcategories: 4, // 3 or 4 only\n\tsize: 5, // 3, 4 or 5... 6?\n\tlabels: ['Students', 'Subjects', 'Teachers', 'Grades'],\n\titems: [\n\t\t['Adrian', 'Bruce', 'Dave', 'Nicko', 'Steve'],\n\t\t['Chemistry', 'French', 'History', 'Maths', 'Music'],\n\t\t[\n\t\t\t'Mr Bettencourt',\n\t\t\t'Mrs Hammett',\n\t\t\t'Dr Malmsteen',\n\t\t\t'Mr Mustaine',\n\t\t\t'Miss Petrucci',\n\t\t],\n\t\t['A', 'B', 'C', 'D', 'E'],\n\t],\n};\n\nconst constants = {\n\tMAX_CATS: 4,\n\tMAX_SIZE: 6,\n};\n\nexport { defaults, constants };\n", "import { defaults } from './settings.js';\n\nconst getParam = (param) => {\n\tconst q = document.location.search;\n\tif (q) {\n\t\tconst p = new URLSearchParams(q);\n\t\tif (p) {\n\t\t\tconst d = p.get(param);\n\t\t\tif (d) {\n\t\t\t\tconst j = JSON.parse(d);\n\t\t\t\tconsole.log('woop');\n\t\t\t\tconsole.log(j);\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getDataObjFromURL = () => {\n\tconst data = getParam('data');\n\tlet dataObj;\n\n\tif (!data.categories || !data.size) {\n\t\tdataObj = structuredClone(defaults);\n\t} else {\n\t\tdataObj = data;\n\t}\n\n\treturn dataObj;\n};\n\nexport { getDataObjFromURL };\n", "import { getDataObjFromURL } from './modules/tools.js';\n\n/*\nTODO:\n* write story and clues for example\n* load example button\n* save puzzle state - serialised array in params with save button\n* \"revert to saved\" button\n* polish up visuals / UI\n* print stylesheet\n\nTO DONE:\n* CSS for label borders\n* handle layout for 3 categories\n* input for params\n* URL-ise params\n* clear button\n*/\n\nlet currSettings;\n\nconst removeStateClass = (target) => {\n\tfor (let number = 0; number < 5; number++) {\n\t\ttarget.classList.remove(`state${number}`);\n\t}\n};\n\nconst clearCrosses = (box) => {\n\tconst crosses = box.querySelectorAll('[data-state=\"4\"]');\n\tfor (const cross of crosses) {\n\t\tsetState(cross, 0, true);\n\t}\n\n\twriteCrosses(box);\n};\n\nconst writeCrosses = (box) => {\n\tconst ticks = box.querySelectorAll('[data-state=\"2\"]');\n\tfor (const tick of ticks) {\n\t\tconst thisRow = tick.dataset.row;\n\t\tconst thisRowCells = box.querySelectorAll(`[data-row=\"${thisRow}\"]`);\n\t\tfor (const rowCell of thisRowCells) {\n\t\t\tif (rowCell.dataset.state === '0') {\n\t\t\t\tsetState(rowCell, 4, true);\n\t\t\t}\n\t\t}\n\n\t\tconst thisCol = tick.dataset.col;\n\t\tconst thisColCells = box.querySelectorAll(`[data-col=\"${thisCol}\"]`);\n\t\tfor (const colCell of thisColCells) {\n\t\t\tif (colCell.dataset.state === '0') {\n\t\t\t\tsetState(colCell, 4, true);\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst setCrosses = (target) => {\n\tconst box = target.closest('.box');\n\tclearCrosses(box);\n};\n\nconst writeCellContent = (target, state) => {\n\tlet cellContent;\n\tswitch (state) {\n\t\tcase 1:\n\t\t\tcellContent = '\u274C';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcellContent = '\u2705';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcellContent = '\u2753';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tcellContent = '\u2716\uFE0F';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcellContent = ' ';\n\t\t\tbreak;\n\t}\n\n\ttarget.textContent = cellContent;\n};\n\nconst setState = (target, newState, stop) => {\n\ttarget.dataset.state = newState;\n\tremoveStateClass(target);\n\ttarget.classList.add(`state${newState}`);\n\n\twriteCellContent(target, newState);\n\n\tif (!stop) {\n\t\tsetCrosses(target);\n\t}\n};\n\nconst checkForConflictingTick = (target) => {\n\tconst box = target.closest('.box');\n\tconst ticksInRow = box.querySelectorAll(\n\t\t`[data-row=\"${target.dataset.row}\"][data-state=\"2\"]`,\n\t);\n\tconst ticksInCol = box.querySelectorAll(\n\t\t`[data-col=\"${target.dataset.col}\"][data-state=\"2\"]`,\n\t);\n\tif (ticksInRow.length > 0 || ticksInCol.length > 0) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst boxClick = (target) => {\n\tconst targetState = Number.parseInt(target.dataset.state, 10);\n\n\tif (targetState === 1) {\n\t\t// red cross\n\t\t// only continue if there is no tick in row or column\n\t\tconst isItFixed = checkForConflictingTick(target);\n\t\tif (isItFixed) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (targetState < 4) {\n\t\tlet newState = targetState + 1;\n\t\tif (newState === 4) {\n\t\t\tnewState = 0;\n\t\t}\n\t\tsetState(target, newState);\n\t}\n};\n\nconst buildLabels = (config) => {\n\tconst theLabels = document.createElement('div');\n\ttheLabels.classList.add('labels', `labels-size${config.size}`);\n\ttheLabels.id = `labels${config.labelsDiv}`;\n\n\tif (['0', '2a', '3'].includes(config.labelsDiv.toString())) {\n\t\ttheLabels.classList.add('labels-side');\n\t}\n\tconsole.log(`labels: ${config.group}`);\n\n\tconst labelsGroup = document.createElement('div');\n\tlabelsGroup.classList.add('group');\n\tlabelsGroup.textContent = config.group;\n\ttheLabels.append(labelsGroup);\n\n\tfor (let itemNumber = 0; itemNumber < config.size; itemNumber++) {\n\t\tconst labelsItem = document.createElement('div');\n\t\tlabelsItem.classList.add('item', `item${itemNumber}`);\n\t\tlabelsItem.textContent = config.items[itemNumber];\n\t\ttheLabels.append(labelsItem);\n\t}\n\n\treturn theLabels;\n};\n\nconst buildGrid = (config) => {\n\tconst theBox = document.createElement('div');\n\ttheBox.classList.add('box', `box-size${config.size}`);\n\ttheBox.id = `box${config.boxNumber}`;\n\n\tfor (let rowNumber = 1; rowNumber <= config.size; rowNumber++) {\n\t\tfor (let columnNumber = 1; columnNumber <= config.size; columnNumber++) {\n\t\t\tconst cell = document.createElement('div');\n\t\t\tcell.classList.add('cell', 'state0');\n\t\t\tcell.dataset.state = '0';\n\t\t\tcell.dataset.row = rowNumber;\n\t\t\tcell.dataset.col = columnNumber;\n\t\t\tcell.dataset.rc = `${rowNumber}-${columnNumber}`;\n\t\t\tcell.style.gridRow = rowNumber;\n\t\t\tcell.style.gridColumn = columnNumber;\n\t\t\tcell.textContent = ' ';\n\t\t\ttheBox.append(cell);\n\t\t\tcell.addEventListener('click', (event) => {\n\t\t\t\tboxClick(event.target);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn theBox;\n};\n\nconst buildPuzzle = (uCats, uSize) => {\n\tconst { labels, items } = currSettings;\n\tconst wSize = uSize || currSettings.size;\n\tconst wCats = uCats || currSettings.categories;\n\tconst totalBoxes = (wCats - 2) * 3;\n\tconst puzzleHolder = document.querySelector('#puzzle');\n\tpuzzleHolder.dataset.cats = wCats;\n\tpuzzleHolder.dataset.size = wSize;\n\n\tfor (let boxNumber = 1; boxNumber <= totalBoxes; boxNumber++) {\n\t\tconst config = {\n\t\t\tboxNumber,\n\t\t\tsize: wSize,\n\t\t};\n\n\t\tconst boxGrid = buildGrid(config);\n\t\tpuzzleHolder.append(boxGrid);\n\t}\n\n\tfor (let labelsDiv = 0; labelsDiv < wCats; labelsDiv++) {\n\t\tconst config = {\n\t\t\tlabelsDiv,\n\t\t\tsize: wSize,\n\t\t\tgroup: labels[labelsDiv],\n\t\t\titems: items[labelsDiv],\n\t\t};\n\n\t\tconst labelsBox = buildLabels(config);\n\t\tpuzzleHolder.append(labelsBox);\n\n\t\tif (['2', '3'].includes(labelsDiv.toString())) {\n\t\t\tconst newConfig = config;\n\t\t\tnewConfig.labelsDiv = `${config.labelsDiv}a`;\n\t\t\t// console.log(newConfig);\n\t\t\tconst labelsBox = buildLabels(newConfig);\n\t\t\tpuzzleHolder.append(labelsBox);\n\t\t}\n\t}\n};\n\nconst deletePuzzle = () => {\n\tdocument.querySelector('#puzzle').replaceChildren();\n};\n\nconst writeSettingsLink = () => {\n\tconst link = document.querySelector('#settingsLink');\n\tconst dataParam = encodeURIComponent(JSON.stringify(currSettings));\n\tconst currentHref = link.getAttribute('href');\n\n\tlink.setAttribute('href', `${currentHref}/?data=${dataParam}`);\n};\n\nconst clearPuzzle = () => {\n\tif (confirm('Are you sure you want to clear the puzzle?')) {\n\t\tdeletePuzzle();\n\t\tbuildPuzzle(currSettings.categories, currSettings.size);\n\t}\n};\n\nconst init = () => {\n\tconsole.log('JS loaded');\n\n\tcurrSettings = getDataObjFromURL();\n\n\tconsole.log(currSettings);\n\n\tdocument.querySelector('#menu-trigger').addEventListener('click', (event) => {\n\t\tevent.target.closest('nav').classList.toggle('open');\n\t});\n\n\tdocument.querySelector('#clearButton').addEventListener('click', clearPuzzle);\n\n\tbuildPuzzle();\n\twriteSettingsLink();\n};\n\nwindow.addEventListener('load', init);\n"],
  "mappings": "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",
  "names": ["defaults", "getParam", "param", "q", "p", "d", "j", "getDataObjFromURL", "data", "dataObj", "defaults", "currSettings", "removeStateClass", "target", "number", "clearCrosses", "box", "crosses", "cross", "setState", "writeCrosses", "ticks", "tick", "thisRow", "thisRowCells", "rowCell", "thisCol", "thisColCells", "colCell", "setCrosses", "writeCellContent", "state", "cellContent", "newState", "stop", "checkForConflictingTick", "ticksInRow", "ticksInCol", "boxClick", "targetState", "buildLabels", "config", "theLabels", "labelsGroup", "itemNumber", "labelsItem", "buildGrid", "theBox", "rowNumber", "columnNumber", "cell", "event", "buildPuzzle", "uCats", "uSize", "labels", "items", "wSize", "wCats", "totalBoxes", "puzzleHolder", "boxNumber", "boxGrid", "labelsDiv", "labelsBox", "newConfig", "deletePuzzle", "writeSettingsLink", "link", "dataParam", "currentHref", "clearPuzzle", "init", "getDataObjFromURL"]
}

(()=>{var d={categories:4,size:5,labels:["Students","Subjects","Teachers","Grades"],items:[["Adrian","Bruce","Dave","Nicko","Steve"],["Chemistry","French","History","Maths","Music"],["Mr Bettencourt","Mrs Hammett","Dr Malmsteen","Mr Mustaine","Miss Petrucci"],["A","B","C","D","E"]]},u={MAX_CATS:4,MAX_SIZE:6};var S=t=>{let o=document.location.search;if(o){let e=new URLSearchParams(o);if(e){let c=e.get(t);if(c){let s=JSON.parse(c);return console.log("woop"),console.log(s),s}}}return!1},m=()=>{let t=S("data"),o;return!t.categories||!t.size?o=structuredClone(d):o=t,o};var r,g=()=>{let t=r.categories,o=r.size;document.querySelector("#numCategories").value=t,document.querySelector("#numItems").value=o;for(let e=0;e<u.MAX_CATS;e++){let c=document.querySelector('[for="category-'.concat(e,'"]')),s=document.querySelector("#category-".concat(e)),a=document.querySelector('[data-items="items-'.concat(e,'"]'));s.value=r.labels[e],a.querySelector("p").textContent=r.labels[e],e<t?(c.classList.remove("hide"),s.classList.remove("hide"),a.classList.remove("hide")):(c.classList.add("hide"),s.classList.add("hide"),s.value="",a.classList.add("hide"));for(let n=0;n<u.MAX_SIZE;n++){let i=document.querySelector('[for="category-'.concat(e,"-item-").concat(n,'"]')),l=document.querySelector("#category-".concat(e,"-item-").concat(n));l.value="",r.items[e]&&r.items[e][n]&&(l.value=r.items[e][n]),n<o?(i.classList.remove("hide"),l.classList.remove("hide")):(i.classList.add("hide"),l.classList.add("hide"),l.value="")}}p()},p=()=>{console.log("parseForm");let t={labels:[],items:[]};t.categories=document.querySelector("#numCategories").value,t.size=document.querySelector("#numItems").value;let o=document.querySelectorAll("#categoriesFieldset input");for(let s=0;s<o.length;s++){let a=o[s];t.labels.push(a.value);let n=document.querySelector('[data-items="items-'.concat(s,'"] > p'));n.textContent=a.value}for(let s=0;s<t.categories;s++){let a=[];document.querySelectorAll('[data-items="items-'.concat(s,'"] input')).forEach(i=>{a.push(i.value)}),t.items.push(a)}console.log(t);let e=document.querySelector("#saveLink"),c=encodeURIComponent(JSON.stringify(t));console.log(c),e.setAttribute("href","/?data=".concat(c))},f=()=>{let t=document.querySelectorAll('[type="text"]'),o=document.querySelectorAll("select");t.forEach(e=>{e.addEventListener("change",p)}),o.forEach(e=>{e.addEventListener("change",c=>{let s=c.target,a=s.dataset.field;console.log(a),r[a]=s.value,g()})})},h=()=>{console.log("JS loaded"),r=m(),g(),f()};window.addEventListener("load",h);})();
//# sourceMappingURL=edit-5fbfb39.js.map */

(()=>{var d={categories:4,size:5,labels:["Students","Subjects","Teachers","Grades"],items:[["Adrian","Bruce","Dave","Nicko","Steve"],["Chemistry","French","History","Maths","Music"],["Mr Bettencourt","Mrs Hammett","Dr Malmsteen","Mr Mustaine","Miss Wylde"],["A","B","C","D","E"]]},u={MAX_CATS:4,MAX_SIZE:6};var p=t=>{let o=document.location.search;if(o){let e=new URLSearchParams(o);if(e){let a=e.get(t);if(a){let s=JSON.parse(a);return console.log("woop"),console.log(s),s}}}return!1},m=()=>{let t=p("data"),o;return!t.categories||!t.size?o=structuredClone(d):o=t,o};var r,f=()=>{let t=r.categories,o=r.size;document.querySelector("#numCategories").value=t,document.querySelector("#numItems").value=o;for(let e=0;e<u.MAX_CATS;e++){let a=document.querySelector('[for="category-'.concat(e,'"]')),s=document.querySelector("#category-".concat(e)),c=document.querySelector('[data-items="items-'.concat(e,'"]'));s.value=r.labels[e],c.querySelector("p").textContent=r.labels[e],e<t?(a.classList.remove("hide"),s.classList.remove("hide"),c.classList.remove("hide")):(a.classList.add("hide"),s.classList.add("hide"),s.value="",c.classList.add("hide"));for(let n=0;n<u.MAX_SIZE;n++){let i=document.querySelector('[for="category-'.concat(e,"-item-").concat(n,'"]')),l=document.querySelector("#category-".concat(e,"-item-").concat(n));l.value="",r.items[e]&&r.items[e][n]&&(l.value=r.items[e][n]),n<o?(i.classList.remove("hide"),l.classList.remove("hide")):(i.classList.add("hide"),l.classList.add("hide"),l.value="")}}g()},g=()=>{console.log("parseForm");let t={labels:[],items:[]};t.categories=document.querySelector("#numCategories").value,t.size=document.querySelector("#numItems").value,document.querySelectorAll("#categoriesFieldset input").forEach(s=>{t.labels.push(s.value)});for(let s=0;s<t.categories;s++){let c=[];document.querySelectorAll('[data-items="items-'.concat(s,'"] input')).forEach(i=>{c.push(i.value)}),t.items.push(c)}console.log(t);let e=document.querySelector("#saveLink"),a=JSON.stringify(t);console.log(a),e.setAttribute("href","/?data=".concat(a))},S=()=>{let t=document.querySelectorAll('[type="text"]'),o=document.querySelectorAll("select");t.forEach(e=>{e.addEventListener("change",g)}),o.forEach(e=>{e.addEventListener("change",a=>{let s=a.target,c=s.dataset.field;console.log(c),r[c]=s.value,f()})})},h=()=>{console.log("JS loaded"),r=m(),f(),S()};window.addEventListener("load",h);})();
//# sourceMappingURL=edit-ce6d462.js.map */
